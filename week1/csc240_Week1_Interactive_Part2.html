<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC 240 - Week 1: Set Operations, Venn Diagrams, Subsets - Part 2</title>
    <meta name="description" content="Interactive learning experience for CSC 240 Week 1 Part 2: Modules 4-6">
    <style>
        /* Color scheme and variables - Matched to Part 1 */
        :root {
            --primary: #1a4d2e;
            --secondary: #2d6a4f;
            --accent: #52b788;
            --light: #95d5b2;
            --pale: #d8f3dc;
            --bg: #ffffff;
            --surface: #f8f9fa;
            --text: #1b263b;
            --text-light: #415a77;
            --text-muted: #778da9;
            --border: #d8e2dc;
            --success: #2a9d8f;
            --warning: #f77f00;
            --error: #e63946;
            --info: #0077b6;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            z-index: 10000;
        }
        
        .skip-link:focus { top: 0; }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            z-index: 998;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 { font-size: 1.75rem; margin-bottom: 0.5rem; }
        
        nav {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 999;
            border-bottom: 2px solid var(--border);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0.5rem 1rem;
        }
        
        .nav-list {
            list-style: none;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .nav-link {
            padding: 0.5rem 1rem;
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .nav-link:hover {
            background: var(--light);
            border-color: var(--accent);
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .progress-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: var(--surface);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .progress-bar {
            width: 100%;
            height: 16px;
            background: var(--border);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--success));
            transition: width 0.5s;
            width: 0%;
        }
        
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem 3rem;
        }
        
        .module-section {
            margin-bottom: 3rem;
            scroll-margin-top: 100px;
        }
        
        .card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }
        
        .card-icon {
            width: 48px;
            height: 48px;
            background: var(--accent);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        h2 { color: var(--primary); font-size: 1.5rem; margin-bottom: 0.5rem; }
        h3 { color: var(--primary); font-size: 1.25rem; margin: 1.5rem 0 1rem; }
        h4 { color: var(--primary); font-size: 1.1rem; margin: 1rem 0 0.5rem; }
        
        p { color: var(--text-light); margin-bottom: 1rem; }
        
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            border-left: 4px solid;
        }
        
        .alert.info { background: #e3f2fd; border-color: var(--info); color: #01579b; }
        .alert.warning { background: #fff3e0; border-color: var(--warning); color: #e65100; }
        .alert.success { background: #e8f5e9; border-color: var(--success); color: #1b5e20; }
        .alert.error { background: #ffebee; border-color: var(--error); color: #b71c1c; }
        
        .example-box {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            margin-bottom: 1.5rem;
        }
        
        .example-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: 2px solid;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .btn-primary:hover {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border-color: var(--accent);
        }
        
        .btn-secondary:hover {
            background: var(--accent);
            color: white;
        }

        /* Specialized Interactive Styles for Part 2 */
        .set-input-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .form-group { flex: 1; min-width: 200px; }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        
        .form-input, select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
        }

        .set-bubbles {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
            flex-wrap: wrap;
            min-height: 50px;
            align-items: center;
        }
        
        .bubble {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        /* Venn Diagram SVG Styles */
        .venn-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 1.5rem 0;
        }
        
        svg.venn-svg {
            max-width: 100%;
            height: auto;
            cursor: pointer;
        }

        .venn-region {
            fill: white;
            stroke: var(--primary);
            stroke-width: 2;
            transition: fill 0.3s;
        }

        .venn-region:hover { fill: var(--pale); }
        .venn-region.shaded { fill: var(--accent); opacity: 0.7; }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }
        
        .quiz-feedback.show { display: block; }
        .quiz-feedback.correct { background: #e8f5e9; color: #1b5e20; border-left: 4px solid var(--success); }
        .quiz-feedback.incorrect { background: #ffebee; color: #b71c1c; border-left: 4px solid var(--error); }

        footer {
            background: var(--surface);
            padding: 2rem 1rem;
            margin-top: 3rem;
            text-align: center;
            border-top: 2px solid var(--border);
        }
    </style>
</head>
<body>

    <a href="#module-4" class="skip-link">Skip to Module 4</a>

    <header>
        <div class="header-content">
            <h1>CSC 240 - Discrete Structures</h1>
            <p style="color: #ffffff; opacity: 1;">Week 1: Set Operations, Venn Diagrams, Subsets - Part 2</p>
        </div>
    </header>

    <nav>
        <div class="nav-container">
            <ul class="nav-list">
                <li><a href="#module-4" class="nav-link">Module 4: Operations</a></li>
                <li><a href="#module-5" class="nav-link">Module 5: Venn Diagrams</a></li>
                <li><a href="#module-6" class="nav-link">Module 6: Subsets</a></li>
            </ul>
        </div>
    </nav>

    <div class="progress-container">
        <div class="progress-header">
            <span style="font-weight: 600;">Your Progress (Part 2)</span>
            <div>
                <span id="modules-completed">Modules: 0/3</span>
                <span id="progress-percentage" style="font-weight: 700; color: var(--accent); font-size: 1.5rem; margin-left: 1rem;">0%</span>
            </div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </div>

    <main>
        <section id="module-4" class="module-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üßÆ</div>
                    <div>
                        <h2>Module 4: Set Operations</h2>
                        <p style="margin: 0; color: var(--text-muted);">Estimated Time: 40 minutes</p>
                    </div>
                </div>

                <div class="alert info">
                    <span style="font-size: 1.5rem;">üéØ</span>
                    <div>
                        <strong>Learning Objectives:</strong>
                        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                            <li>Perform Union (‚à™), Intersection (‚à©), and Difference (‚àí) operations.</li>
                            <li>Calculate Complements (A') relative to a Universal Set.</li>
                            <li>Identify Disjoint Sets.</li>
                        </ul>
                    </div>
                </div>

                <h3>The Core Operations</h3>
                <p>Just like numbers have addition and subtraction, sets have operations that allow us to combine them. Let's look at the primary ways to manipulate sets.</p>
                
                <div style="margin: 1.5rem 0; text-align: center;">
                                    </div>

                <div class="example-box">
                    <div class="example-title">üí° Key Definitions</div>
                    <ul class="example-steps">
                        <li><strong>Union (A ‚à™ B):</strong> "Marriage". Combines all unique elements from A and B.</li>
                        <li><strong>Intersection (A ‚à© B):</strong> "Common Ground". Elements present in <em>both</em> sets.</li>
                        <li><strong>Difference (A ‚àí B):</strong> "Subtraction". Elements in A that are NOT in B.</li>
                    </ul>
                </div>

                <h3>Interactive Tool: Set Operation Calculator</h3>
                <div class="card" style="background: var(--surface); border-color: var(--accent);">
                    <p>Enter elements separated by commas (e.g., 1, 2, 3).</p>
                    
                    <div class="set-input-row">
                        <div class="form-group">
                            <label class="form-label" for="setA">Set A:</label>
                            <input type="text" id="setA" class="form-input" value="1, 2, 3, 4" placeholder="1, 2, 3">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="setB">Set B:</label>
                            <input type="text" id="setB" class="form-input" value="3, 4, 5, 6" placeholder="3, 4, 5">
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label class="form-label" for="operation">Operation:</label>
                        <select id="operation">
                            <option value="union">Union (A ‚à™ B)</option>
                            <option value="intersection">Intersection (A ‚à© B)</option>
                            <option value="diffAB">Difference (A ‚àí B)</option>
                            <option value="diffBA">Difference (B ‚àí A)</option>
                            <option value="disjoint">Are they Disjoint?</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="calculateSetOperation()">Calculate</button>

                    <div id="calc-feedback" class="quiz-feedback" aria-live="polite"></div>
                    
                    <div id="visual-animator" class="set-bubbles" aria-hidden="true">
                        </div>
                </div>

                <h3>Common Mistakes</h3>
                <div class="alert warning">
                    <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
                    <div>
                        <strong>Watch Out:</strong>
                        <p>Students often confuse <strong>Difference</strong>. If you are doing <code>A - B</code>, you never add new elements from B. You only delete elements from A that happen to be in B.</p>
                    </div>
                </div>
                
                <div class="example-box">
                    <div class="example-title">‚ùì Practice Question</div>
                    <p>If A = {x, y, z} and B = {y, z, w}, what is A - B?</p>
                    <div style="display: flex; gap: 10px; margin-top: 1rem;">
                        <button class="btn btn-secondary" onclick="checkM4Quiz('incorrect')">{w}</button>
                        <button class="btn btn-secondary" onclick="checkM4Quiz('correct')">{x}</button>
                        <button class="btn btn-secondary" onclick="checkM4Quiz('incorrect')">{x, w}</button>
                    </div>
                    <div id="m4-quiz-feedback" class="quiz-feedback" aria-live="polite"></div>
                </div>
            </div>
        </section>

        <section id="module-5" class="module-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üé®</div>
                    <div>
                        <h2>Module 5: Venn Diagrams</h2>
                        <p style="margin: 0; color: var(--text-muted);">Estimated Time: 35 minutes</p>
                    </div>
                </div>
            
                <div class="alert info">
                    <span style="font-size: 1.5rem;">üéØ</span>
                    <div>
                        <strong>Learning Objectives:</strong>
                        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                            <li>Draw and shade Venn diagrams.</li>
                            <li>Interpret shaded regions.</li>
                            <li>Use diagrams to solve word problems.</li>
                        </ul>
                    </div>
                </div>

                <h3>Visualizing Logic</h3>
                <p>Venn diagrams use circles to represent sets inside a rectangle representing the Universal Set (U). Overlapping regions represent intersections.</p>
                
                <div style="margin: 1.5rem 0; text-align: center;">
                                    </div>

                <div class="example-box">
                    <div class="example-title">Interactive Shading Practice</div>
                    <p id="shade-instruction" style="margin-bottom: 1rem;"><strong>Target:</strong> Click the regions to shade <strong>A ‚à© B</strong> (Intersection).</p>
                    
                    <div class="venn-wrapper">
                        <svg width="300" height="200" viewBox="0 0 300 200" class="venn-svg">
                            <rect x="0" y="0" width="300" height="200" fill="none" stroke="#ccc" stroke-dasharray="4" />
                            <text x="10" y="20" fill="#999">U</text>
                            
                            <path id="path-a-only" class="venn-region" d="M 90,100 A 60,60 0 1,0 150,186.6 A 60,60 0 0,1 150,13.4 A 60,60 0 0,0 90,100 Z" onclick="toggleShade('path-a-only')"/>
                            <text x="60" y="100" pointer-events="none" font-weight="bold" fill="var(--text)">A</text>

                            <path id="path-b-only" class="venn-region" d="M 210,100 A 60,60 0 1,1 150,13.4 A 60,60 0 0,0 150,186.6 A 60,60 0 0,1 210,100 Z" onclick="toggleShade('path-b-only')"/>
                            <text x="240" y="100" pointer-events="none" font-weight="bold" fill="var(--text)">B</text>

                            <path id="path-intersect" class="venn-region" d="M 150,13.4 A 60,60 0 0,1 150,186.6 A 60,60 0 0,1 150,13.4 Z" onclick="toggleShade('path-intersect')"/>
                        </svg>
                    </div>

                    <div style="text-align: center; gap: 1rem; display: flex; justify-content: center;">
                        <button class="btn btn-primary" onclick="checkVennShading()">Check Shading</button>
                        <button class="btn btn-secondary" onclick="resetVenn()">Reset</button>
                    </div>
                    <div id="venn-feedback" class="quiz-feedback" aria-live="polite"></div>
                </div>

                <h3>Problem Solver: The Survey</h3>
                <p>In a class of 50 students: 30 study Java (Set A), 25 study Python (Set B), and 10 study <strong>both</strong>.</p>
                
                <div class="card" style="background: var(--surface);">
                    <h4 style="margin-top:0;">Challenge</h4>
                    <p>How many students study <strong>only</strong> Python?</p>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="text" id="venn-q1" class="form-input" placeholder="Enter number..." style="width: 150px;">
                        <button class="btn btn-primary" onclick="checkVennMath()">Submit</button>
                    </div>
                    <div id="venn-math-feedback" class="quiz-feedback" aria-live="polite"></div>
                </div>
            </div>
        </section>

        <section id="module-6" class="module-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üì¶</div>
                    <div>
                        <h2>Module 6: Subsets & Relations</h2>
                        <p style="margin: 0; color: var(--text-muted);">Estimated Time: 25 minutes</p>
                    </div>
                </div>

                <div class="alert info">
                    <span style="font-size: 1.5rem;">üéØ</span>
                    <div>
                        <strong>Learning Objectives:</strong>
                        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                            <li>Define subset (‚äÜ) vs. proper subset (‚äÇ).</li>
                            <li>Understand properties: Reflexive, Transitive.</li>
                            <li>Analyze nested set relationships.</li>
                        </ul>
                    </div>
                </div>

                <h3>Understanding Containment</h3>
                <p>If every element of Set A is also inside Set B, then A is a <strong>subset</strong> of B ($A \subseteq B$). If A is a subset of B, but A is <em>not equal</em> to B (B has extra stuff), then A is a <strong>proper subset</strong> ($A \subset B$).</p>
                
                <div style="margin: 1.5rem 0; text-align: center;">
                                    </div>

                <div class="example-box">
                    <div class="example-title">Subset Checker</div>
                    <p>Type two sets to see their relationship.</p>
                    <div class="set-input-row">
                        <div class="form-group">
                            <label class="form-label">Set A:</label>
                            <input type="text" id="subA" class="form-input" value="2, 4" placeholder="e.g. 1, 2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Set B:</label>
                            <input type="text" id="subB" class="form-input" value="1, 2, 3, 4, 5" placeholder="e.g. 1, 2, 3">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="checkSubset()">Check Relationship</button>
                    <div id="subset-feedback" class="quiz-feedback" aria-live="polite"></div>
                    
                    <div id="subset-visual" style="margin-top:20px; min-height: 100px; display: flex; align-items: center; justify-content: center;"></div>
                </div>

                <h3>Properties Quiz</h3>
                <div class="card" style="background: var(--surface);">
                    <p class="quiz-question"><strong>True or False:</strong> The empty set (‚àÖ) is a subset of every set.</p>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="checkSubsetQuiz(true)">True</button>
                        <button class="btn btn-secondary" onclick="checkSubsetQuiz(false)">False</button>
                    </div>
                    <div id="subset-quiz-feedback" class="quiz-feedback" aria-live="polite"></div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>CSC 240 - Discrete Structures</p>
        <p style="font-size: 0.9rem;">¬© 2024 Course Materials</p>
    </footer>

    <script>
        /* --- UTILITY FUNCTIONS --- */
        function parseSet(inputStr) {
            if (!inputStr.trim()) return [];
            return inputStr.split(',')
                .map(item => item.trim())
                .filter(item => item !== "")
                .map(item => isNaN(item) ? item : Number(item));
        }

        function arraysEqual(a, b) {
            if (a.length !== b.length) return false;
            let setA = new Set(a);
            for (let item of b) if (!setA.has(item)) return false;
            return true;
        }

        /* --- MODULE 4 LOGIC --- */
        function calculateSetOperation() {
            const setA = parseSet(document.getElementById('setA').value);
            const setB = parseSet(document.getElementById('setB').value);
            const op = document.getElementById('operation').value;
            const feedback = document.getElementById('calc-feedback');
            const visual = document.getElementById('visual-animator');
            
            let result = [];
            let msg = "";
            let explanation = "";

            if (op === 'union') {
                result = [...new Set([...setA, ...setB])];
                explanation = "A ‚à™ B contains all unique elements from both sets.";
            } else if (op === 'intersection') {
                result = setA.filter(x => setB.includes(x));
                explanation = "A ‚à© B contains only elements found in BOTH sets.";
            } else if (op === 'diffAB') {
                result = setA.filter(x => !setB.includes(x));
                explanation = "A ‚àí B contains elements in A that are NOT in B.";
            } else if (op === 'diffBA') {
                result = setB.filter(x => !setA.includes(x));
                explanation = "B ‚àí A contains elements in B that are NOT in A.";
            } else if (op === 'disjoint') {
                const intersection = setA.filter(x => setB.includes(x));
                const isDisjoint = intersection.length === 0;
                msg = isDisjoint 
                    ? `<strong>Yes!</strong> They share no elements.` 
                    : `<strong>No.</strong> They share: {${intersection.join(', ')}}`;
                feedback.innerHTML = msg;
                feedback.className = isDisjoint ? "quiz-feedback show correct" : "quiz-feedback show incorrect";
                markProgress(4, 'completed');
                return;
            }

            result.sort((a,b) => a - b);
            msg = `Result: { ${result.join(', ')} }`;
            feedback.innerHTML = `<strong>${msg}</strong><br><small>${explanation}</small>`;
            feedback.className = "quiz-feedback show correct";

            visual.innerHTML = '';
            result.forEach(item => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.innerText = item;
                visual.appendChild(bubble);
            });

            markProgress(4, 'completed');
        }

        function checkM4Quiz(status) {
            const fb = document.getElementById('m4-quiz-feedback');
            if(status === 'correct') {
                fb.innerHTML = "<strong>Correct!</strong> We start with {x, y, z} and remove anything found in B ({y, z}).";
                fb.className = "quiz-feedback show correct";
            } else {
                fb.innerHTML = "<strong>Incorrect.</strong> Remember, Difference (A-B) only keeps things that started in A. Do not add items from B.";
                fb.className = "quiz-feedback show incorrect";
            }
        }

        /* --- MODULE 5 LOGIC --- */
        let currentShading = { 'path-a-only': false, 'path-b-only': false, 'path-intersect': false };

        function toggleShade(id) {
            const el = document.getElementById(id);
            currentShading[id] = !currentShading[id];
            el.classList.toggle('shaded', currentShading[id]);
        }

        function checkVennShading() {
            const fb = document.getElementById('venn-feedback');
            if(currentShading['path-intersect'] && !currentShading['path-a-only'] && !currentShading['path-b-only']) {
                fb.innerHTML = "<strong>Correct!</strong> You shaded the region where the circles overlap.";
                fb.className = "quiz-feedback show correct";
                markProgress(5, 'completed');
            } else {
                fb.innerHTML = "<strong>Not quite.</strong> For Intersection (‚à©), shade ONLY the part where the circles overlap.";
                fb.className = "quiz-feedback show incorrect";
            }
        }

        function resetVenn() {
            ['path-a-only', 'path-b-only', 'path-intersect'].forEach(id => {
                currentShading[id] = false;
                document.getElementById(id).classList.remove('shaded');
            });
            document.getElementById('venn-feedback').className = "quiz-feedback";
        }

        function checkVennMath() {
            const val = document.getElementById('venn-q1').value.trim();
            const fb = document.getElementById('venn-math-feedback');
            if(val === "15") {
                fb.innerHTML = "<strong>Correct!</strong> Total Python (25) minus Intersection (10) equals 15.";
                fb.className = "quiz-feedback show correct";
            } else {
                fb.innerHTML = "<strong>Try again.</strong> Hint: Take the total Python students and subtract those who also study Java.";
                fb.className = "quiz-feedback show incorrect";
            }
        }

        /* --- MODULE 6 LOGIC --- */
        function checkSubset() {
            const A = parseSet(document.getElementById('subA').value);
            const B = parseSet(document.getElementById('subB').value);
            const fb = document.getElementById('subset-feedback');
            const vis = document.getElementById('subset-visual');

            const isSubset = A.every(val => B.includes(val));
            const isEqual = arraysEqual(A, B);
            const isProper = isSubset && !isEqual;

            if (isEqual) {
                fb.innerHTML = "<strong>A = B</strong>. They are equal sets.";
                fb.className = "quiz-feedback show correct";
                vis.innerHTML = "<div style='width:100px; height:100px; border:2px solid #333; border-radius:50%; display:flex; align-items:center; justify-content:center; background:#ccc;'>A=B</div>";
            } else if (isProper) {
                fb.innerHTML = "<strong>A ‚äÇ B</strong> (Proper Subset). All of A is inside B.";
                fb.className = "quiz-feedback show correct";
                vis.innerHTML = "<div style='width:120px; height:120px; border:2px solid #333; border-radius:50%; position:relative; background:#eee;'><span style='position:absolute; top:5px; left:50%; transform:translateX(-50%);'>B</span><div style='width:60px; height:60px; border:2px solid var(--accent); background:var(--pale); border-radius:50%; position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; align-items:center; justify-content:center;'>A</div></div>";
            } else {
                fb.innerHTML = "<strong>No subset relationship</strong>. A contains elements not in B.";
                fb.className = "quiz-feedback show incorrect";
                vis.innerHTML = "<span>No Containment</span>";
            }
            markProgress(6, 'completed');
        }

        function checkSubsetQuiz(answer) {
            const fb = document.getElementById('subset-quiz-feedback');
            if (answer === true) {
                fb.innerHTML = "<strong>Correct!</strong> The empty set is a subset of every set.";
                fb.className = "quiz-feedback show correct";
            } else {
                fb.innerHTML = "<strong>Incorrect.</strong> It is a fundamental property that ‚àÖ ‚äÜ A for any set A.";
                fb.className = "quiz-feedback show incorrect";
            }
        }

        /* --- PROGRESS TRACKING --- */
        const modules = [4, 5, 6];
        
        function updateProgress() {
            let completedCount = 0;
            modules.forEach(m => {
                if(sessionStorage.getItem(`csc240_m${m}`) === 'completed') completedCount++;
            });
            
            const pct = Math.round((completedCount / 3) * 100);
            document.getElementById('modules-completed').innerText = `Modules: ${completedCount}/3`;
            document.getElementById('progress-percentage').innerText = `${pct}%`;
            document.getElementById('progress-fill').style.width = `${pct}%`;
        }

        function markProgress(moduleNum, status) {
            sessionStorage.setItem(`csc240_m${moduleNum}`, status);
            updateProgress();
        }

        // Initialize
        document.addEventListener("DOMContentLoaded", () => {
            updateProgress();
            
            // Intersection Observer for auto-scroll tracking
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        const modNum = parseInt(id.replace('module-', ''));
                        const current = sessionStorage.getItem(`csc240_m${modNum}`);
                        if(current !== 'completed') {
                            // We don't mark 'in-progress' in storage to avoid complicating the simple 0/3 counter, 
                            // but we could extend logic here if needed.
                        }
                    }
                });
            }, { threshold: 0.3 });

            document.querySelectorAll('.module-section').forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
